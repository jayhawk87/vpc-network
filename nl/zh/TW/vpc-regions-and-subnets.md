---

copyright:
  years: 2018, 2019
  
lastupdated: "2019-02-20"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:note: .note}
{:important: .important}
{:download: .download}

# 使用 IP 位址範圍、位址字首、地區及子網路 
{: #working-with-ip-address-ranges-address-prefixes-regions-and-subnets}

本文件概述可用的（或受限的）IP 位址範圍及使用者動作，其與地區和子網路以及位址字首相關。某些 IP 位址範圍無法使用，因為 IBM Cloud 可能正在使用它們。  

當您在 {{site.data.keyword.cloud}} VPC 內建立子網路時，會根據您在其中建立 VPC 的地區和區域，自動指派_位址字首_。您可以使用預設位址字首，或者，在許多情況下，您可以手動變更位址字首（包括 BYOIP 位址）。 

## IBM Cloud VPC 和地區

{{site.data.keyword.cloud}} VPC 部署在某個地區中，但可能跨越多個區域。每個地區包含多個區域，分別代表獨立錯誤網域。

VPC 中的子網路會根據其建立所在的地區和區域，獲指派一個_位址字首_。下表顯示可用的地區和區域。 

|   位置     | 地區 | API 端點 | 狀態 |
| ------- | :------: | :------: |:------: |
| 達拉斯 | us-south | `us-south.iaas.cloud.ibm.com`| 可用 |
| 法蘭克福 | eu-de | `eu-de.iaas.cloud.ibm.com`| 可用 |
| 華盛頓特區 | us-east | `us-east.iaas.cloud.ibm.com`| 即將推出 |
| 東京 | jp-tok | `jp-tok.iaas.cloud.ibm.com`| 即將推出 |
| 倫敦 | eu-gb | `eu-gb.iaas.cloud.ibm.com`| 即將推出 |
| 雪梨 | au-syd | `au-syd.iaas.cloud.ibm.com`| 即將推出 |

## IBM Cloud VPC 及子網路

客戶可以（且通常會這麼做，這是最佳作法）將 IBM Cloud VPC 劃分為數個子網路。IBM Cloud VPC 中的所有子網路都可以透過隱含路由器的專用 L3 遞送來連接另一個子網路。您不需要設定任何路由器或路徑。 

關於 VPC 中子網路的有用資訊：

* 子網路是由您指定的 IP 位址範圍組成。 
* 子網路會連結至單一區域，它不能跨越多個區域或地區。
* 子網路可以跨越 IBM Cloud VPC 中的整個區域。
* 您必須先建立 VPC，然後才能在該 VPC 內建立子網路。
* 不提供 IPv6 支援。
* 您可以將 VSI 與子網路相關聯或取消關聯。（它需要您新增 vNIC 並選取頻寬。）

您可以將自己的公用 IPv4 位址範圍 (BYOIP) 帶至 IBM Cloud VPC 帳戶。當您使用 BYOIP 時，IBM Cloud 必須在 IBM Cloud 資源上配置這些 IPv4 位址，其將在所提供的位址中來回傳送封包。因此，當您在 IBM Cloud 上使用所提供的 IPv4 範圍時，這些 IP 位址有可能在您使用此服務時向 IBM 支援人員及協力廠商公開。
{:important}

**圖：顯示區域、地區和子網路的 VPC 圖形表示法。**

![IBM Cloud VPC](images/vpc-experience.png)

## 使用子網路的位址字首

每個子網路都必須存在於位址字首內。
 * 預先配置每個區域的子網路位址字首。
 * 對於新的子網路，您可以從現有位址字首中挑選您的 IP 位址範圍。
 * 如果區域的位址字首不適合，可以編輯其中一個現有位址字首，或為區域新增一個新的位址字首（使用 API、CLI 或使用者介面）。
 
### 預設 VPC 位址字首
 
建立新的 VPC 時，會根據地區及區域指派預設位址字首，如下所示：
 
* 'us-south-1' = '10.240.0.0/18'
* 'us-south-2' = '10.240.64.0/18'

其他區域或地區可能指派不同的預設字首，包括如下：
 
 * 10.240.0.0/18
 * 10.240.64.0/18
 * 10.240.128.0/18
 
### 位址字首和 IBM Cloud 主控台使用者介面
 
當您使用 IBM Cloud 主控台使用者介面來建立 VPC 時，系統會自動選取您的位址字首，且您需要在該預設字首內建立子網路。如果這個位址架構不符合您的需求，您可以在建立 VPC 之後自訂位址字首。然後，您可以在自訂的位址字首中建立子網路，並刪除您使用預設字首所建立的子網路。
 
需要此暫行解決方法，才能透過 IBM Cloud 主控台使用者介面使用 BYOIP。
{:note}

### 可用的 IP 位址

這些是可用的 IP 位址，如 **RFC 1918** 中所定義：

 * 10.0.0.0 – 10.255.255.255
 * 172.16.0.0 – 172.31.255.255
 * 192.168.0.0 – 192.168.255.255

### 下列位址是子網路中的保留位址

在此清單中，IP 位址假設子網路的 CIDR 範圍是 10.10.10.0/24：

  * CIDR 範圍中的第一個位址 (10.10.10.0)：網址
  * CIDR 範圍中的第二個位址 (10.10.10.1)：閘道位址
  * CIDR 範圍中的第三個位址 (10.10.10.2)：由 IBM 保留
  * CIDR 範圍中的第四個位址 (10.10.10.3)：由 IBM 保留供未來使用
  * CIDR 範圍中的最後一個位址 (10.10.10.255)：網路播送位址

### 其他有關建立子網路的資訊

指定 VPC 的子網路有兩種方式：
  * 您可以提供所需的子網路大小來建立子網路，例如支援的位址數目（例如，1024）。
  * 您可以提供 CIDR 範圍（例如 10.0.1/29）來建立子網路。
  
以如何使用 CIDR 指定 1024 區塊為例，如果您指定 CIDR 範圍而非子網路大小，則 IPv4 區塊 `192.168.100.0/22` 代表從 `192.168.100.0`到 `192.168.103.255` 的 1024 個 IPv4 位址。
{:tip}

### 其他有關刪除子網路的資訊
  * 如果子網路中的資源（例如「虛擬伺服器實例 (VSI)」、浮動 IP 或公用閘道）正在使用中，則您無法刪除子網路，必須先刪除這些資源。
  * 您「無法」調整現有子網路的大小。例如，10.10.10.0/24 無法調整大小為 10.5.1.3/20。
